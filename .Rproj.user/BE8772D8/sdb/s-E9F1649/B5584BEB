{
    "collab_server" : "",
    "contents" : "---\ntitle: \"R Notebook\"\noutput: html_notebook\n---\n\n# JMJPFU\n# 15-Nov-2016\n\nThis is a stand by notebook\n\n\n# Relationship of High Attendence cases and other variables\n\nLet us now see if there are any trends which shows how the attendence relates to the performance of students with respect to average grades.\n\n```{r}\nattend_top <- Indi_attend %>% filter(Attend < 45) %>% arrange(Attend)\n\nstud_consol <- Desoto_New %>% filter(StudentID %in% attend_top$StudentID[7001:7005])\n\nstud_consol$Date <- as.character(stud_consol$Date)\n\nstud_consol$Month <- format(as.Date(stud_consol$Date),\"%B\") # Making a new variable for Month\nstud_consol$Day <- format(as.Date(stud_consol$Date),\"%a\")\n\n\n# Doing aggregation with respect to the Tiers with the function\n\nstud_agg <- firstier(stud_consol) # Running the function for the consolidation of the cases\n\n# Need to convert the Month as per the academic year order\n\nstud_agg$Month <- factor(stud_agg$Month,levels = c(\"August\",\"September\",\"October\",\"November\",\"December\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\"))\n\nstud_agg <- stud_agg %>% filter(FirstTier  %in% c(\"Attendence\",\"Grade\"))\n\n\n# Plotting all the variables together\n\nq3 <- ggplot(data=stud_agg,aes(Month,Var,color=FirstTier,group=1)) + geom_point() + geom_line() + facet_grid(FirstTier~StudentID,scales = \"free\")\nq3 + theme(axis.text.x=element_text(angle=70,hjust=1))\n\n# Taking an average of the grades for all\n\nstud_consol %>% filter(FirstTier == \"Grade\") %>% summarise(avg = mean(as.numeric(Variable),na.rm=TRUE))\n \n\n\n```\n\nThere isnt any specific trends within this group of students who have lower instances of attendence and the grade attained. \n\nLet us also just observe some bins in attendence and the average grades per bins of attendence\n\n```{r}\n\nstud_grade <-  Desoto_New %>% filter(StudentID %in% attend_250$StudentID[1:126]) %>% filter(FirstTier==\"Attendence\") %>% select(Variable,StudentID) %>% group_by(StudentID) %>% summarise(Attend = sum(as.numeric(Variable),na.rm=TRUE))\n\n\nrange(stud_grade$Attend,na.rm = TRUE)\n\n# Ranges of attendence for Bottom 7000 from 1:44\n# Ranges of attendence for Top 126 from 252:1324\n\n\n```\nLet the bins be the following\n# Top Bins\nBin1 : 1:10 : 85.39\nBin2 : 11:20 : 85.49\nBin3: 21:30 : 85:66\nBin4 : 31:40 : 85.35\nBin5 : > 40 : 82\n# Lower bins\nBin1 : 250 : 350 : 72\nBin2 : 350:500 : 67\nBin3 : 500:750 : 75\nBin4 : 750:1000 : 61\nBin5 : > 1000 : 35\n\n```{r}\n\nbin1_stud <- Desoto_New %>%  filter(FirstTier==\"Attendence\") %>% group_by(StudentID) %>% summarise(attend = sum(as.numeric(Variable))) %>% filter(attend > 1000) %>% select(StudentID)\n\nDesoto_New %>% filter(StudentID %in% bin1_stud$StudentID) %>% filter(FirstTier==\"Grade\") %>% summarise(avg = mean(as.numeric(Variable),na.rm=TRUE))\n\n```\n\nThere is a stark difference between the averge grades achieved by the students with the highest instances of attendence and also lowest instances of attendence.\n\nHowever the difference in average grade within each category is giving different picture. \n\nFor the students in the top attendence category, there is very difference between the bins.\nHowever for students in the lowest category there is a huge and decreasing trends within each of the bin.\n\n# Relationship of High Attendence cases and Discipline\n\n\n```{r}\n\nattend_top <- Indi_attend %>% filter(Attend < 45) %>% arrange(Attend)\n\nstud_consol <- Desoto_New %>% filter(StudentID %in% attend_top$StudentID[200:205])\n\nstud_consol$Date <- as.character(stud_consol$Date)\n\nstud_consol$Month <- format(as.Date(stud_consol$Date),\"%B\") # Making a new variable for Month\nstud_consol$Day <- format(as.Date(stud_consol$Date),\"%a\")\n\n\n# Doing aggregation with respect to the Tiers with the function\n\nstud_agg <- firstier(stud_consol) # Running the function for the consolidation of the cases\n\n# Need to convert the Month as per the academic year order\n\nstud_agg$Month <- factor(stud_agg$Month,levels = c(\"August\",\"September\",\"October\",\"November\",\"December\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\"))\n\nstud_agg <- stud_agg %>% filter(FirstTier  %in% c(\"Attendence\",\"Discipline\"))\n\n\n# Plotting all the variables together\n\nq4 <- ggplot(data=stud_agg,aes(Month,Var,color=FirstTier,group=1)) + geom_point() + geom_line() + facet_grid(FirstTier~StudentID,scales = \"free\")\nq4 + theme(axis.text.x=element_text(angle=70,hjust=1))\n\n# Taking an average of the grades for all\n\n#stud_consol %>% filter(FirstTier == \"Grade\") %>% summarise(avg = mean(as.numeric(Variable),na.rm=TRUE))\n\n```\n\nLet us look at binning the discipline issues for those students with attendence issues\n\n# Tomorrow\n\n1.Need to look at the attendence cases and its relationship with grades. How the average grades are varying with higher attendence\n2. Need to look at those cases where attendence issues are very low ( Filter < 45 attendence) and find its relationship with discipline and grades.\n\n3.Need to filter with respect to the top discipline cases and find the relationship it has to attendence and grades\n\n4. Let us look at Attendence data and look at courses which has high prevelance of absenteeism\n\n# JMJPFU\n# 16-Nov-2016\n\nDoing some merging of the discipline and Discipline template\n\n```{r}\n\nnames(Discipline_template) <- c(\"FourthTier\",\"Weight\")\n\n\n```\n\nGetting the counts of schools\n\n```{r}\n\ncolnames(school_count)[1] <- colnames(school_name)[1]\n\nschool_name <- merge(school_name,school_count,all.x = TRUE)\n\n```\n\n# The below code is cut paste from teh Desoto Notebook\n\n```{r}\n\nschool_disc <- attend150_data %>% filter(StudentID %in% temp$StudentID) %>% filter(FirstTier==\"Discipline\") %>% select(Schoolname,Variable,Normvar)\n\nschool_norm <- school_disc %>% group_by(Schoolname) %>% summarise(Norm = sum(Normvar))\n\nschool_norm$Norm <- school_norm$Norm/sum(school_norm$Norm)\n\nschool_act <- school_disc %>% group_by(Schoolname) %>% summarise(Norm = sum(as.numeric(Variable)))\n\nggplot(data=school_act,aes(Schoolname,Norm,color=Schoolname,group=1)) + geom_point() + geom_line()+ theme(axis.text.x=element_text(angle=70,hjust=1))\n\nggplot(data=school_norm,aes(Schoolname,Norm,color=Schoolname,group=1)) + geom_point() + geom_line()+ theme(axis.text.x=element_text(angle=70,hjust=1))\n\nschool_norm_2 <- school_norm %>% filter(Schoolname != \"JJAEP Dallas Co\" )\n\nggplot(data=school_norm_2,aes(Schoolname,Norm,color=Schoolname,group=1)) + geom_point() + geom_line()+ theme(axis.text.x=element_text(angle=70,hjust=1))\n\n\nggplot(data=school_norm,aes(Schoolname,Norm,color=Schoolname,group=1)) + geom_point() + geom_line()+ theme(axis.text.x=element_text(angle=70,hjust=1))\n\n\nggplot(data=Disc_agg,aes(Schoolname,Wtdisc,color=Schoolname,group=1)) + geom_point() + geom_line()+ theme(axis.text.x=element_text(angle=70,hjust=1))\n\nschool_norm_2 <- school_norm %>% filter(Schoolname != \"JJAEP Dallas Co\" )\n\nDisc_agg3 <- Disc_agg %>% filter(Schoolname != \"JJAEP Dallas Co\")\n\nggplot(data=school_norm_2,aes(Schoolname,Norm,color=Schoolname,group=1)) + geom_point() + geom_line()+ theme(axis.text.x=element_text(angle=70,hjust=1))\n\n\nggplot(data=Disc_agg3,aes(Schoolname,Wtdisc,color=Schoolname,group=1)) + geom_point() + geom_line()+ theme(axis.text.x=element_text(angle=70,hjust=1))\n\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNow that we have seen an overall trend let us take the cases between the Attendence bins 150 and 600 and study their behaviours. \n\n```{r, message=FALSE, warning=FALSE}\n# JMJPFU\n# 15-Nov-2016\n\nattend_150 <- Indi_attend %>% filter(Attend > 150 & Attend <= 600) %>% arrange(desc(Attend))\n\nattend150_data <- Desoto_New %>% filter(StudentID %in% attend_150$StudentID)\n\n# Aggregating data\n\nattend150_data$Date <- as.character(attend150_data$Date)\n\nattend150_data$Month <- format(as.Date(attend150_data$Date),\"%B\") # Making a new variable for Month\nattend150_data$Day <- format(as.Date(attend150_data$Date),\"%a\")\n\n\n# Doing aggregation with respect to the Tiers with the function\n########### Hiding function data ############\n\nstud_agg <- firstier(attend150_data) # Running the function for the consolidation of the cases\n\n########### Hiding the function ###########\n# Need to convert the Month as per the academic year order\n\nstud_agg$Month <- factor(stud_agg$Month,levels = c(\"August\",\"September\",\"October\",\"November\",\"December\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\"))\n\n```\n\n\n\n```{r}\n# Filtering some cases \ntemp <- stud_agg %>% filter(FirstTier == \"Discipline\") %>% group_by(StudentID) %>% summarise(Var = sum(as.numeric(Var))) %>% arrange(desc(as.numeric(Var)))\n\n\n\n```\n\nWhat is being shown here is we have taken the attendence bin between 150: 600 and are Visualising the top students with respect to all three variables together\n\n```{r}\nstud_fil <- stud_agg %>% filter(StudentID %in% temp$StudentID[6:10])\n\n# Visualising the filtered cases\n\nq4 <- ggplot(data=stud_fil,aes(Month,Var,color=FirstTier,group=1)) + geom_point() + geom_line() + facet_grid(FirstTier~StudentID,scales = \"free\")\nq4 + theme(axis.text.x=element_text(angle=70,hjust=1))\n```",
    "created" : 1479192549984.000,
    "dirty" : true,
    "encoding" : "",
    "folds" : "",
    "hash" : "146675426",
    "id" : "B5584BEB",
    "lastKnownWriteTime" : 8029744848509562463,
    "last_content_update" : 1479385666943,
    "path" : null,
    "project_path" : null,
    "properties" : {
        "chunk_output_type" : "inline",
        "tempName" : "Untitled3"
    },
    "relative_order" : 11,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}